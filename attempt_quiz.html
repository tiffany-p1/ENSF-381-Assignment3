<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <title>Attempt Quiz Page</title>
    </head>
    <body>
        <header>
            <img width=100px height=100px src="logo.jpg">
            <h1>LMS - Learning Management System</h1>
        </header>
        <h2 id="attemptQuizHeader">LMS - Attempt Quiz</h2>
        <div id="nav">
            <nav>
                <a href="index.html">Homepage</a>  
                <a href="course_view.html">Courses</a>
            </nav>
        </div>
        <main id="quiz">
            <img id="quizBanner" width=100% height=100% src="banner.jpg">
            <div id="quizDetails">
                <h2 class="quizDetails" id="courseName">Course Name: Web Development</h2>
                <h2 class="quizDetails">Course Code: ENSF381</h2>
                <p class="quizDetails">Topic: HTML Basics</p>
                <p class="quizDetails">Deadline: 11:59PM, February 7th, 2025</p>
                <p class="quizDetails" id="attempts">Attempts Allowed: 1</p>
                <p class="quizDetails" id="quizTimer"></p>
            </div>
            <script>
                var min = 10;
                var displayMin = "";
                var sec = 0;
                var displaySec = ""
                var quizTimer = document.getElementById('quizTimer');
                quizTimer.textContent = "Time Remaining: 10:00";
                var timerInterval = setInterval(updateTimer, 1000);   //MUST UNCOMMENT BEFORE SUBMIT
                function updateTimer() {
                    if (sec == 0) {
                        min--;
                        sec = 59;
                    } else {
                        sec--;
                    }
                    if (min < 10) {
                        displayMin = "0" + min; 
                    } else {
                        displayMin = min;
                    }
                    if (sec < 10) {
                        displaySec = "0" + sec;
                    } else {
                        displaySec = sec;
                    }
                    if (min == 0 && sec == 0) {
                        clearInterval(timerInterval);
                        window.location.href = "leaderboard.html";
                    }
                    quizTimer.textContent = "Time Remaining: " + displayMin + ":" + displaySec;
                }
            </script>

            <h3 class="q1">Question 1</h3>
            <p class="q1">What does HTML stand for?</p>
            <form class="quizQuestion" id="question1">
                <input type="radio" class="q1-1" id="q1-answer1" name="q1" value="answer1">
                <label class="q1-1" for="q1-answer1">Hyper Train Marking Language</label> 
                <input type="radio" class="q1-2" id="q1-answer2" name="q1" value="answer2">
                <label class="q1-2" for="q1-answer2">Hyper Text Markup Language</label>
                <input type="radio" class="q1-3" id="q1-answer3" name="q1" value="answer3">
                <label class="q1-3" for="q1-answer3">Home Tool Markup Language</label>
                <button type="button" class="submitQuizQuestion" id="submitQ1">Submit Answer</button>
            </form>
            <script>
                var q1Submit = document.getElementById("submitQ1");
                q1Submit.addEventListener('click', () => {
                    var q1Ans1 = document.getElementById("q1-answer1").checked;
                    var q1Ans2 = document.getElementById("q1-answer2").checked;
                    var q1Ans3 = document.getElementById("q1-answer3").checked;
                    if (!q1Ans1 && !q1Ans2 && !q1Ans3) {
                        alert("Question 1 has not been answered.");
                    } else if (!document.getElementById("q1-answer1").disabled){
                        if(confirm("Are you sure you want to submit?\nYou will not be able to change your answer after submitting.")) {
                            document.getElementById("q1-answer1").disabled = true;
                            document.getElementById("q1-answer2").disabled = true;
                            document.getElementById("q1-answer3").disabled = true;
                        }
                    }
                    if (document.getElementById("q1-answer1").disabled) {
                        alert("Question 1 has been submitted.");
                    }
                    displayScore();
                });
            </script>

            <h3 class="q2">Question 2</h3>
            <p class="q2">Which of the following are HTML elements? (select all that apply)</p>
            <form class="quizQuestion" id="question2">
                <input type="checkbox" class="q2-1" id="q2-answer1" name="q2" value="answer1">
                <label class="q2-1" for="q2-answer1">&lt;div&gt;</label> 
                <input type="checkbox" class="q2-2" id="q2-answer2" name="q2" value="answer2">
                <label class="q2-2" for="q2-answer2">&lt;span&gt;</label>
                <button type="button" class="submitQuizQuestion" id="submitQ2">Submit Answer</button>
            </form>
            <script>
                var q2Submit = document.getElementById("submitQ2");
                q2Submit.addEventListener('click', () => {
                    var q2Ans1 = document.getElementById("q2-answer1").checked;
                    var q2Ans2 = document.getElementById("q2-answer2").checked;
                    if (!q2Ans1 && !q2Ans2) {
                        alert("Question 2 has not been answered.");
                    } else if (!document.getElementById("q2-answer1").disabled){
                        if(confirm("Are you sure you want to submit?\nYou will not be able to change your answer after submitting.")) {
                            document.getElementById("q2-answer1").disabled = true;
                            document.getElementById("q2-answer2").disabled = true;
                        }
                    }
                    if (document.getElementById("q2-answer1").disabled) {
                        alert("Question 2 has been submitted.");
                    }
                    displayScore();
                });
            </script>
            <script>
                function displayScore() {
                    score = 0;
                    if (document.getElementById("q1-answer2").checked) score += 50;
                    if (document.getElementById("q2-answer1").checked) score += 25;
                    if (document.getElementById("q2-answer2").checked) score += 25;
                    if (document.getElementById("q1-answer1").disabled && document.getElementById("q2-answer1").disabled) {
                        clearInterval(timerInterval);
                        var finalScore = document.createElement("p");
                        finalScore.id = "quizScore";
                        finalScore.className = "quizDetails";
                        finalScore.textContent = "Final quiz score: " + score + "/100";
                        finalScore.style.fontWeight = 800;
                        finalScore.style.textDecoration = "underline";
                        var quizDetails = document.getElementById("quizDetails");
                        quizDetails.appendChild(finalScore);
                    }
                }
            </script>

            <form id="finishQuiz">
                <a href="leaderboard.html"><button type="button">Finish Quiz</button></a>
            </form>
        </main>
        <footer><p>&copy; 2025 LMS. All rights reserved.</p></footer>
    </body>
</html>
